<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejercicio 3</title>
    <link rel="icon" href="https://www.info.unlp.edu.ar/favicon.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Rubik" rel="stylesheet">
  </head>
  <script>

    const TIME = 1;
    const MAX_HEIGHT = 800;

    function mostrar(url,w,h){
      let img = document.createElement('img');
      if (h > MAX_HEIGHT){
        let factor = h/MAX_HEIGHT;
        img.width = w/factor;
        img.height = h/factor;
      }
      img.src = url;

      let frame = document.getElementById("frame");

      while(frame.firstChild!= null){
        frame.removeChild(frame.firstChild);
      }

      img.addEventListener('load',function (){ setTimeout(gatito, TIME * 1000 ) });

      frame.appendChild(img);
    }

    function gatito(){
      fetch('https://api.thecatapi.com/v1/images/search')
      .then(response => response.json())
      .then(cat => cat[0])
      .then(cat => mostrar(cat.url,cat.width,cat.height))
      .catch(noCat => console.log('no hay gatito :c'));
    }
  </script>
<body onload="gatito()">
      <h1>MIAU</h1>
      <div id="frame"></div>
</body>
</html>